(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(26)},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(5),s=n.n(o),c=n(1),l=n(11),i=n.n(l),u=n(2),m=n(7),p=n(6),d=function(e){return e.posts},f=function(e){return e.isLoading},b=function(e){return e.isSearchError},E="setPosts",y="deletePost",h="deleteComment",j="setLoading",v="filterPosts",g=Object(p.b)(function(e,t){var n;switch(t.type){case E:return Object(u.a)({},e,{posts:t.payload,postsFromServer:t.payload});case y:return n=e.posts.filter(function(e){return e.id!==t.payload}),Object(u.a)({},e,{posts:n,postsFromServer:n});case h:return n=e.posts.map(function(e){return e.id===t.postId?Object(u.a)({},e,{comments:e.comments.filter(function(e){return e.id!==t.commentId})}):e}),Object(u.a)({},e,{posts:n,postsFromServer:n});case j:return Object(u.a)({},e,{isLoading:t.payload});case v:var r=e.postsFromServer.filter(function(e){return e.title.toLowerCase().includes(t.payload)||e.body.toLowerCase().includes(t.payload)});return 0===r.length?Object(u.a)({},e,{isSearchError:!0}):Object(u.a)({},e,{posts:r,isSearchError:!1});default:return e}},{postsFromServer:[],posts:[],isLoading:!1,isSearchError:!1}),N=(n(25),function(e){return fetch(e).then(function(e){return e.json()})}),O=function(e){var t=e.user,n=t.name,r=t.email,o=t.address;return a.a.createElement("section",null,a.a.createElement("p",null,n),a.a.createElement("p",null,r),a.a.createElement("address",null,Object.entries(o).map(function(e){var t=Object(m.a)(e,2),n=t[0],r=t[1];return"object"!==typeof r&&a.a.createElement(a.a.Fragment,{key:n},n," ",r,a.a.createElement("br",null))})))},w={deleteComment:function(e,t){return{type:h,postId:e,commentId:t}}},L=Object(c.b)(function(){return{}},w)(function(e){var t=e.postId,n=e.deleteComment,r=e.comment,o=r.id,s=r.name,c=r.email,l=r.body;return a.a.createElement("section",{className:"comment"},a.a.createElement("section",{className:"title"},a.a.createElement("button",{type:"button",className:"delete",onClick:function(){return n(t,o)}},"x"),a.a.createElement("h3",{className:"comment__title"},s)),a.a.createElement("section",{className:"comment__main-part"},a.a.createElement("p",null,c),a.a.createElement("p",{className:"comment__body"},l)))}),I=function(e){var t=e.postId;return e.comments.map(function(e){return a.a.createElement(L,{key:e.id,comment:e,postId:t})})},S={deletePost:function(e){return{type:y,payload:e}}},C=Object(c.b)(function(){return{}},S)(function(e){var t=e.deletePost,n=e.post,r=n.id,o=n.title,s=n.body,c=n.user,l=n.comments;return a.a.createElement("article",{className:"post"},a.a.createElement("section",{className:"title"},a.a.createElement("h2",null,o),a.a.createElement("button",{className:"delete",onClick:function(){return t(r)}},"x")),a.a.createElement("section",{className:"post__main-part"},a.a.createElement("p",{className:"post__body"},s),a.a.createElement(O,{user:c})),a.a.createElement(I,{comments:l,postId:r}))}),P=Object(c.b)(function(e){return{posts:d(e)}})(function(e){return e.posts.map(function(e){return a.a.createElement(C,{key:e.id,post:e})})}),_={setPosts:function(e){return{type:E,payload:e}},setLoading:function(e){return{type:j,payload:e}},filterPosts:function(e){return{type:v,payload:e}}},k=Object(c.b)(function(e){return{posts:d(e),isLoading:f(e),isSearchError:b(e)}},_)(function(e){var t=e.isLoading,n=e.setLoading,r=e.posts,o=e.setPosts,s=e.filterPosts,c=e.isSearchError;return a.a.createElement("main",{className:"list"},a.a.createElement("h1",null,"Dynamic list of posts"),0!==r.length&&a.a.createElement("section",{className:"search-bar"},a.a.createElement("input",{type:"text",placeholder:"search post",className:"input",onChange:function(e){return s(e.target.value.toLowerCase().trim())}}),c&&a.a.createElement("p",{className:"warning"},"There are no such posts, please try another search combination")),t&&a.a.createElement("button",{type:"button",className:"button button--non-active"},"Loading"),!t&&(0===r.length?a.a.createElement("button",{className:"button",type:"button",onClick:function(){var e,t,r,a,s;return i.a.async(function(c){for(;;)switch(c.prev=c.next){case 0:return n(!0),c.prev=1,c.next=4,i.a.awrap(Promise.all([N("https://jsonplaceholder.typicode.com/posts"),N("https://jsonplaceholder.typicode.com/users"),N("https://jsonplaceholder.typicode.com/comments")]));case 4:e=c.sent,t=Object(m.a)(e,3),r=t[0],a=t[1],s=t[2],o(r.map(function(e){return Object(u.a)({},e,{user:a.find(function(t){return t.id===e.userId}),comments:s.filter(function(t){return t.postId===e.id})})})),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),console.error(c.t0);case 15:return c.prev=15,n(!1),c.finish(15);case 18:case"end":return c.stop()}},null,null,[[1,12,15,18]])}},"Load"):a.a.createElement(P,null)))});s.a.render(a.a.createElement(c.a,{store:g},a.a.createElement(k,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.e1005bc1.chunk.js.map